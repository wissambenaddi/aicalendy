<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord - AiCalendy</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css"> <link rel="stylesheet" href="css/pages/dashboard.css"> <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
</head>
<body class="flex h-screen overflow-hidden"> <aside class="w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 z-10">
        <div class="h-16 border-b border-gray-200 flex-shrink-0 flex items-center justify-center px-4">
             <a href="index.html" class="text-2xl font-bold text-indigo-600">AiCalendy</a>
        </div>
        <nav class="flex-grow p-4 space-y-2 overflow-y-auto">
            <a href="#dashboard" class="sidebar-link active">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" /> </svg>
                <span data-translate-key="sidebar_dashboard">Dashboard</span>
            </a>
            <a href="#categories" class="sidebar-link">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /> </svg>
                <span data-translate-key="sidebar_categories">Mes Catégories</span>
            </a>
             <a href="#tasks" class="sidebar-link">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /> </svg>
                <span data-translate-key="sidebar_tasks">Mes tâches</span>
            </a>
            <a href="#appointments" class="sidebar-link">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" /> </svg>
                <span data-translate-key="sidebar_appointments">Mes Rendez-vous</span>
            </a>
            <a href="#profile" class="sidebar-link">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"> <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /> </svg>
                <span data-translate-key="sidebar_profile">Mon Profil</span>
            </a>
        </nav>
        </aside>
    <div class="flex-1 flex flex-col overflow-hidden">
        <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 flex-shrink-0">
             <div></div>
             <div class="flex items-center space-x-4">
                 <div class="flex items-center space-x-2"><button id="lang-fr" class="lang-btn active" aria-label="Français"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3 2" class="w-6 h-4 rounded-sm"><rect width="3" height="2" fill="#fff"/> <rect width="1" height="2" fill="#002654"/> <rect width="1" height="2" x="2" fill="#ce1126"/></svg></button><button id="lang-en" class="lang-btn" aria-label="English"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" class="w-6 h-4 rounded-sm" fill="none"><clipPath id="b"><path d="M0 0h60v30H0z"/></clipPath><g clip-path="url(#b)"><path fill="#012169" d="M0 0h60v30H0z"/><path stroke="#fff" stroke-width="6" d="m0 0 60 30m0-30L0 30"/><path stroke="#C8102E" stroke-width="4" d="m0 0 60 30m0-30L0 30"/><path fill="#fff" d="M30 0v30M0 15h60"/><path stroke="#C8102E" stroke-width="6" d="M30 0v30M0 15h60"/></g></svg></button></div>
                 <div class="h-6 w-px bg-gray-300"></div>
                 <div class="relative profile-container">
                     <button type="button" id="user-profile-trigger" class="flex items-center space-x-3 cursor-pointer focus:outline-none" aria-haspopup="true" aria-expanded="false">
                        <span class="inline-block h-8 w-8 rounded-full overflow-hidden bg-gray-200 text-gray-400"><svg class="h-full w-full" fill="currentColor" viewBox="0 0 24 24"><path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" /></svg></span>
                        <div>
                            <div id="user-name-display" class="text-sm font-medium text-gray-900 text-left">Chargement...</div>
                            <div id="user-role-display" class="text-xs text-gray-500 text-left" data-translate-key="header_role">Administrateur</div>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
                    </button>
                     <div id="user-profile-dropdown" class="profile-dropdown hidden" role="menu" aria-orientation="vertical" aria-labelledby="user-profile-trigger">
                         <div class="py-1" role="none">
                            <a href="#profile" class="dropdown-item" data-translate-key="dropdown_profile" role="menuitem">Mon Profil</a>
                            <div class="dropdown-divider" role="separator"></div>
                            <button type="button" id="header-logout-btn" class="dropdown-item" data-translate-key="dropdown_logout" role="menuitem">Se déconnecter</button>
                         </div>
                     </div>
                 </div>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-6 md:p-8">

            <div id="dashboard-content" class="main-section active">
                 <div class="flex justify-between items-center mb-6"><h1 class="text-2xl md:text-3xl font-bold text-gray-900" data-translate-key="dashboard_section_title">Tableau de Bord Principal</h1></div>
                 <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                     <div class="dashboard-section"> <h2 class="dashboard-section-title" data-translate-key="dashboard_today_title">Aujourd'hui</h2> <div> <h3 class="dashboard-subsection-title" data-translate-key="dashboard_appointments_today">Rendez-vous</h3> <ul id="today-appointments-list" class="dashboard-list"> <li class="dashboard-list-empty" data-translate-key="dashboard_no_appointments_today">Chargement...</li> </ul> </div> <div class="mt-6"> <h3 class="dashboard-subsection-title" data-translate-key="dashboard_tasks_due_today">Tâches à échéance</h3> <ul id="today-tasks-list" class="dashboard-list"> <li class="dashboard-list-empty" data-translate-key="dashboard_no_tasks_today">Chargement...</li> </ul> </div> </div>
                     <div class="dashboard-section"> <h2 class="dashboard-section-title" data-translate-key="dashboard_quick_stats">Statistiques Rapides</h2> <div class="space-y-2"> <div class="quick-stat"> <span class="quick-stat-label" data-translate-key="dashboard_overdue_tasks_stat">Tâches en retard</span> <span id="stat-overdue-tasks" class="quick-stat-value danger">-</span> </div> <div class="quick-stat"> <span class="quick-stat-label" data-translate-key="dashboard_appointments_week_stat">RDV cette semaine</span> <span id="stat-appointments-week" class="quick-stat-value">-</span> </div> </div> <div class="mt-4 text-right"><a href="#tasks" class="text-sm font-medium text-indigo-600 hover:text-indigo-500 mr-4" data-translate-key="dashboard_view_all">Voir tâches</a><a href="#appointments" class="text-sm font-medium text-indigo-600 hover:text-indigo-500" data-translate-key="dashboard_view_all">Voir RDV</a></div> </div>
                 </div>
                 <div class="chart-container"> <h3 class="text-lg font-medium text-gray-900 mb-4 text-center">Progression Hebdomadaire (Tâches)</h3> <canvas id="progress-chart"></canvas> </div>
            </div>

            <div id="categories-content" class="main-section">
                <div class="text-center py-10 text-gray-500">Chargement...</div>
            </div>

            <div id="tasks-content" class="main-section">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900" data-translate-key="tasks_section_title">Mes Tâches</h1>
                    <button id="create-task-btn" class="inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-800 focus:outline-none focus:border-indigo-800 focus:ring focus:ring-indigo-300 disabled:opacity-25 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 mr-2 -ml-1"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                        <span data-translate-key="dashboard_create_task">Créer une tâche</span>
                    </button>
                </div>
                <div id="tasks-list-container" class="bg-white p-6 rounded-lg shadow-md">
                    <p>Chargement des tâches...</p>
                </div>
            </div>

             <div id="appointments-content" class="main-section">
                <div class="flex justify-between items-center mb-6"><h1 class="text-2xl md:text-3xl font-bold text-gray-900" data-translate-key="appointments_section_title">Mes Rendez-vous</h1></div>
                <div class="bg-white p-6 rounded-lg shadow-md"><p>Contenu de la section "Mes Rendez-vous" (tous) à venir...</p></div>
            </div>

             <div id="profile-content" class="main-section">
                <div class="flex justify-between items-center mb-6"><h1 class="text-2xl md:text-3xl font-bold text-gray-900" data-translate-key="profile_section_title">Mon Profil</h1></div>
                <div class="bg-white p-6 rounded-lg shadow-md"><p>Contenu de la section "Mon Profil" à venir...</p></div>
            </div>
        </main>
         </div>
    <div id="logout-confirm-modal" class="modal-overlay">
        <div class="modal-container">
            <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4" data-translate-key="logout_confirm_title">Confirmation de déconnexion</h3>
            <div class="mt-2"><p class="text-sm text-gray-500" data-translate-key="logout_confirm_text">Êtes-vous sûr de vouloir vous déconnecter ?</p></div>
            <div class="mt-6 flex justify-end space-x-3"> <button type="button" id="cancel-logout-btn" class="btn-secondary" data-translate-key="logout_cancel_button">Annuler</button> <button type="button" id="confirm-logout-btn" class="btn-danger" data-translate-key="logout_confirm_button">Continuer</button> </div>
        </div>
    </div>
    <div id="create-category-modal" class="modal-overlay">
        <div class="modal-container">
            <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4" data-translate-key="create_category_title">Nouvelle Catégorie</h3>
            <form id="create-category-form" class="space-y-4">
                <div> <label for="category-titre" class="block text-sm font-medium text-gray-700" data-translate-key="category_form_title">Titre</label> <input type="text" id="category-titre" name="titre" required class="input-field"> </div>
                <div> <label for="category-description" class="block text-sm font-medium text-gray-700" data-translate-key="category_form_description">Description</label> <textarea id="category-description" name="description" rows="3" class="input-field"></textarea> </div>
                <div> <label for="category-duree" class="block text-sm font-medium text-gray-700" data-translate-key="category_form_duration">Durée (minutes)</label> <input type="number" id="category-duree" name="duree" min="5" step="5" placeholder="Ex: 30" class="input-field"> </div>
                <div> <label for="category-couleur" class="block text-sm font-medium text-gray-700" data-translate-key="category_form_color">Couleur</label> <input type="color" id="category-couleur" name="couleur" value="#4f46e5" class="input-field"> </div>
                <div id="create-category-error" class="text-sm text-red-600 mt-1" aria-live="assertive"></div>
                <div class="mt-6 flex justify-end space-x-3 pt-4 border-t border-gray-200"> <button type="button" id="cancel-create-category-btn" class="btn-secondary" data-translate-key="category_form_cancel">Annuler</button> <button type="submit" id="submit-create-category-btn" class="btn-primary" data-translate-key="category_form_create">Créer la catégorie</button> </div>
            </form>
        </div>
    </div>
     <div id="create-task-modal" class="modal-overlay">
        <div class="modal-container">
            <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4" data-translate-key="create_task_title">Nouvelle Tâche</h3>
            <form id="create-task-form" class="space-y-4">
                <div> <label for="task-titre" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_title">Titre</label> <input type="text" id="task-titre" name="titre" required class="input-field"> </div>
                <div> <label for="task-description" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_description">Description</label> <textarea id="task-description" name="description" rows="3" class="input-field"></textarea> </div>
                <div> <label for="task-due-date" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_due_date">Date d'échéance</label> <input type="date" id="task-due-date" name="date_echeance" class="input-field"> </div>
                <div> <label for="task-assignee" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_assignee">Responsable</label> <input type="text" id="task-assignee" name="responsable" placeholder="Nom ou email" class="input-field"> </div>
                <div> <label for="task-priority" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_priority">Priorité</label> <select id="task-priority" name="priorite" required class="input-field"> <option value="1" data-translate-key="task_form_priority_low">Basse</option> <option value="2" selected data-translate-key="task_form_priority_medium">Moyenne</option> <option value="3" data-translate-key="task_form_priority_high">Haute</option> </select> </div>
                <div> <label for="task-status" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_status">Statut</label> <select id="task-status" name="statut" required class="input-field"> <option value="todo" selected data-translate-key="task_form_status_todo">À faire</option> <option value="inprogress" data-translate-key="task_form_status_inprogress">En cours</option> <option value="done" data-translate-key="task_form_status_done">Terminé</option> </select> </div>
                <div> <label for="task-category" class="block text-sm font-medium text-gray-700" data-translate-key="task_form_category">Catégorie/Département</label> <input type="text" id="task-category" name="categorie_departement" placeholder="Ex: Marketing, RH" class="input-field"> </div>
                <div id="create-task-error" class="text-sm text-red-600 mt-1" aria-live="assertive"></div>
                <div class="mt-6 flex justify-end space-x-3 pt-4 border-t border-gray-200"> <button type="button" id="cancel-create-task-btn" class="btn-secondary" data-translate-key="task_form_cancel">Annuler</button> <button type="submit" id="submit-create-task-btn" class="btn-primary" data-translate-key="task_form_create">Créer la tâche</button> </div>
            </form>
        </div>
    </div>
    <script type="module" src="js/modules/translator.js"></script>
    <script type="module" src="js/modules/dashboard.js"></script>
    </body>
</html>
